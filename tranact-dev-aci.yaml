apiVersion: '2021-10-01'
name: tranact-dev-licensing-containers
location: eastus
tags: { CreatedBy: Scrap Dragon, Environment: Development, OpsTeam: Scrap Dragon, Workload: Scrap Dragon }
properties:
  osType: Linux
  containers:
  - name: web
    properties:
      image: tranact/licensing_web_app:development
      ports:
        - port: 3000
      resources:
        requests:
          cpu: 1.0
          memoryInGB: 2
      environmentVariables:
        - name: LICENSING_HOST
          value: test-scrapdragon.database.windows.net
        - name: LICENSING_DATABASE
          value: SDLicenseServer
        - name: LICENSING_USERNAME
          value: sdadmin
        - name: LICENSING_PASSWORD
          value: 9yj1RB8zZLVU
        - name: TRANACT_LICENSING_HOST
          value: test-scrapdragon.database.windows.net
        - name: TRANACT_LICENSING_DATABASE
          value: TrLicenses
        - name: TRANACT_LICENSING_USERNAME
          value: sdadmin
        - name: TRANACT_LICENSING_PASSWORD
          value: 9yj1RB8zZLVU
        - name: APPLICATION_HOST
          value: localhost:3000
        - name: GODADDY_MAIL_USERNAME 
          value: portal@scrap-dragon.com
        - name: GODADDY_MAIL_PASSWORD
          value: portal@dragon

  - name: nginx
    properties:
      image: tranact/licensing_nginx:development
      ports:
        - port: 80
        - port: 443
      resources:
        requests:
          cpu: 0.25
          memoryInGB: 2
  
  ipAddress:
    ports:
    - protocol: tcp
      port: '80'
    - protocol: tcp
      port: '443'
    type: Public
    dnsNameLabel: 'azuredevlicensing'
